{"ast":null,"code":"var _jsxFileName = \"/home/sol/Documentos/AUS/3ro segundo cuatri/ing 2/URV/src/context/CuponContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { usePouch } from \"use-pouchdb\";\nimport { categorias } from \"../data/categorias\";\nimport { UseNewRandomId } from \"../functions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CuponContext = /*#__PURE__*/createContext();\nconst CuponProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [categoria, setCategoria] = useState();\n  const [totalCategorias, setTotalCategorias] = useState([]);\n  const [provincia, setProvincia] = useState();\n  const [totalProvincias, setTotalProvincias] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [sentData, setSentData] = useState(false);\n  const db = usePouch();\n  useEffect(() => {\n    db === null || db === void 0 ? void 0 : db.get(\"categorias\").then(result => {\n      try {\n        if (result !== undefined) {\n          // ACA HAY CATEGORIAS\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    }).catch(error => {\n      try {\n        categorias.map(e => {\n          var newId = UseNewRandomId(\"categoria\");\n          return db === null || db === void 0 ? void 0 : db.put({\n            ...e,\n            _id: newId,\n            entity: \"categoria\"\n          });\n        });\n      } finally {\n        setIsLoading(false);\n        console.log(error);\n      }\n    });\n  }, [db]);\n  useEffect(() => {\n    if (!isLoading) {\n      db === null || db === void 0 ? void 0 : db.find({\n        selector: {\n          entity: \"categoria\"\n        }\n      }).then(result => {\n        console.log(result);\n      }).catch(error => {\n        console.log(error);\n      });\n    }\n  }, [isLoading]);\n  return /*#__PURE__*/_jsxDEV(CuponContext.Provider, {\n    value: {\n      categoria,\n      setCategoria,\n      provincia,\n      setProvincia,\n      totalCategorias,\n      setTotalCategorias,\n      totalProvincias,\n      setTotalProvincias,\n      isLoading,\n      setIsLoading,\n      sentData,\n      setSentData\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(CuponProvider, \"Hs3Q5Wv+jMUCcIAu9SDynqquUms=\", false, function () {\n  return [usePouch];\n});\n_c = CuponProvider;\nexport default CuponContext;\nexport { CuponProvider };\nvar _c;\n$RefreshReg$(_c, \"CuponProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","usePouch","categorias","UseNewRandomId","CuponContext","CuponProvider","children","categoria","setCategoria","totalCategorias","setTotalCategorias","provincia","setProvincia","totalProvincias","setTotalProvincias","isLoading","setIsLoading","sentData","setSentData","db","get","then","result","undefined","catch","error","map","e","newId","put","_id","entity","console","log","find","selector"],"sources":["/home/sol/Documentos/AUS/3ro segundo cuatri/ing 2/URV/src/context/CuponContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\nimport { usePouch } from \"use-pouchdb\";\nimport { categorias } from \"../data/categorias\";\nimport { UseNewRandomId } from \"../functions\";\n\nconst CuponContext = createContext();\n\nconst CuponProvider = ({ children }) => {\n  const [categoria, setCategoria] = useState();\n  const [totalCategorias, setTotalCategorias] = useState([]);\n  const [provincia, setProvincia] = useState();\n  const [totalProvincias, setTotalProvincias] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [sentData, setSentData] = useState(false);\n\n  const db = usePouch();\n\n  useEffect(() => {\n    db?.get(\"categorias\")\n      .then((result) => {\n        try {\n          if (result !== undefined) {\n            // ACA HAY CATEGORIAS\n          }\n        } finally {\n          setIsLoading(false);\n        }\n      })\n      .catch((error) => {\n        try {\n          categorias.map((e) => {\n            var newId = UseNewRandomId(\"categoria\");\n\n            return db?.put({ ...e, _id: newId, entity: \"categoria\" });\n          });\n        } finally {\n          setIsLoading(false);\n          console.log(error);\n        }\n      });\n  }, [db]);\n\n  useEffect(() => {\n    if (!isLoading) {\n      db?.find({\n        selector: { entity: \"categoria\" },\n      })\n        .then((result) => {\n          console.log(result);\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  }, [isLoading]);\n\n  return (\n    <CuponContext.Provider\n      value={{\n        categoria,\n        setCategoria,\n        provincia,\n        setProvincia,\n        totalCategorias,\n        setTotalCategorias,\n        totalProvincias,\n        setTotalProvincias,\n        isLoading,\n        setIsLoading,\n        sentData,\n        setSentData,\n      }}\n    >\n      {children}\n    </CuponContext.Provider>\n  );\n};\n\nexport default CuponContext;\nexport { CuponProvider };\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACjE,SAASC,QAAQ,QAAQ,aAAa;AACtC,SAASC,UAAU,QAAQ,oBAAoB;AAC/C,SAASC,cAAc,QAAQ,cAAc;AAAC;AAE9C,MAAMC,YAAY,gBAAGN,aAAa,EAAE;AAEpC,MAAMO,aAAa,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EACjC,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,EAAE;EAC5C,MAAM,CAACU,eAAe,EAAEC,kBAAkB,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACY,SAAS,EAAEC,YAAY,CAAC,GAAGb,QAAQ,EAAE;EAC5C,MAAM,CAACc,eAAe,EAAEC,kBAAkB,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACgB,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM,CAACkB,QAAQ,EAAEC,WAAW,CAAC,GAAGnB,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAMoB,EAAE,GAAGlB,QAAQ,EAAE;EAErBD,SAAS,CAAC,MAAM;IACdmB,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEC,GAAG,CAAC,YAAY,CAAC,CAClBC,IAAI,CAAEC,MAAM,IAAK;MAChB,IAAI;QACF,IAAIA,MAAM,KAAKC,SAAS,EAAE;UACxB;QAAA;MAEJ,CAAC,SAAS;QACRP,YAAY,CAAC,KAAK,CAAC;MACrB;IACF,CAAC,CAAC,CACDQ,KAAK,CAAEC,KAAK,IAAK;MAChB,IAAI;QACFvB,UAAU,CAACwB,GAAG,CAAEC,CAAC,IAAK;UACpB,IAAIC,KAAK,GAAGzB,cAAc,CAAC,WAAW,CAAC;UAEvC,OAAOgB,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEU,GAAG,CAAC;YAAE,GAAGF,CAAC;YAAEG,GAAG,EAAEF,KAAK;YAAEG,MAAM,EAAE;UAAY,CAAC,CAAC;QAC3D,CAAC,CAAC;MACJ,CAAC,SAAS;QACRf,YAAY,CAAC,KAAK,CAAC;QACnBgB,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC;MACpB;IACF,CAAC,CAAC;EACN,CAAC,EAAE,CAACN,EAAE,CAAC,CAAC;EAERnB,SAAS,CAAC,MAAM;IACd,IAAI,CAACe,SAAS,EAAE;MACdI,EAAE,aAAFA,EAAE,uBAAFA,EAAE,CAAEe,IAAI,CAAC;QACPC,QAAQ,EAAE;UAAEJ,MAAM,EAAE;QAAY;MAClC,CAAC,CAAC,CACCV,IAAI,CAAEC,MAAM,IAAK;QAChBU,OAAO,CAACC,GAAG,CAACX,MAAM,CAAC;MACrB,CAAC,CAAC,CACDE,KAAK,CAAEC,KAAK,IAAK;QAChBO,OAAO,CAACC,GAAG,CAACR,KAAK,CAAC;MACpB,CAAC,CAAC;IACN;EACF,CAAC,EAAE,CAACV,SAAS,CAAC,CAAC;EAEf,oBACE,QAAC,YAAY,CAAC,QAAQ;IACpB,KAAK,EAAE;MACLR,SAAS;MACTC,YAAY;MACZG,SAAS;MACTC,YAAY;MACZH,eAAe;MACfC,kBAAkB;MAClBG,eAAe;MACfC,kBAAkB;MAClBC,SAAS;MACTC,YAAY;MACZC,QAAQ;MACRC;IACF,CAAE;IAAA,UAEDZ;EAAQ;IAAA;IAAA;IAAA;EAAA,QACa;AAE5B,CAAC;AAAC,GArEID,aAAa;EAAA,QAQNJ,QAAQ;AAAA;AAAA,KARfI,aAAa;AAuEnB,eAAeD,YAAY;AAC3B,SAASC,aAAa;AAAG;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}